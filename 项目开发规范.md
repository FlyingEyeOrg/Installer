# C++ 开发命名规范标准 (基于国际标准)

## 1. 文件命名规范

### 1.1 头文件 (.h/.hpp)
```cpp
// 使用小写字母，单词间用下划线分隔
class_name.h
my_utility_functions.h
network_manager.hpp

// 模板头文件通常使用 .hpp 后缀
template_utils.hpp
```

### 1.2 源文件 (.cpp/.cc)
```cpp
// 与对应的头文件名称保持一致
class_name.cpp
my_utility_functions.cpp
main.cpp
```

### 1.3 内联文件 (.inl)
```cpp
// 内联函数定义文件
vector_operations.inl
template_specializations.inl
```

## 2. 目录命名规范

### 2.1 目录结构
```
project_name/           // 项目根目录，小写字母+下划线
├── include/           // 公共头文件
│   └── project_name/  // 项目专属头文件目录
├── src/              // 源代码
├── tests/            // 测试代码
├── docs/             // 文档
├── third_party/      // 第三方库
└── build/           // 构建输出
```

### 2.2 命名规则
```cpp
// 全部小写，单词间用下划线分隔
src/core/
src/gui/widgets/
include/my_project/utilities/
```

## 3. 编码规范

### 3.1 命名约定总则

#### 3.1.1 基本原则
- 使用有意义的描述性名称
- 避免缩写，除非是广泛认可的（如 max, min, tmp）
- 保持一致性

### 3.2 具体命名规范

#### 3.2.1 类/结构体命名
```cpp
// 帕斯卡命名法（PascalCase）
class NetworkManager;
class FileInputStream;
struct UserPreferences;

// 接口类以 Interface 结尾
class DrawableInterface;
class SerializableInterface;
```

#### 3.2.2 函数命名
```cpp
// 帕斯卡命名法
class Calculator {
public:
    int AddNumbers(int a, int b);
    void CalculateAverage();
    bool IsValid() const;  // 布尔函数使用 Is/Has/Can 等前缀
};

// 自由函数同样使用帕斯卡命名法
void InitializeSystem();
double CalculateDistance(const Point& p1, const Point& p2);
```

#### 3.2.3 变量命名

##### 成员变量
```cpp
class Employee {
private:
    std::string m_name;           // m_ 前缀表示成员变量
    int m_age;                    // 或者使用尾随下划线: name_
    double m_salary;
    
public:
    void SetName(const std::string& name) { m_name = name; }
};
```

##### 局部变量
```cpp
// 小写字母，单词间用下划线分隔
void ProcessData() {
    int item_count = 0;
    double average_score = 0.0;
    std::string file_name = "data.txt";
    
    // 循环计数器使用简单的 i, j, k
    for (int i = 0; i < 10; ++i) {
        // ...
    }
}
```

##### 常量
```cpp
// 全大写，单词间用下划线分隔
const int MAX_BUFFER_SIZE = 1024;
const double PI = 3.1415926535;
const std::string DEFAULT_CONFIG_FILE = "config.ini";

// 类内静态常量
class MathConstants {
public:
    static const int MAX_ITERATIONS = 1000;
};
```

#### 3.2.4 命名空间
```cpp
// 小写字母
namespace my_project {
namespace utilities {
namespace file_io {

class FileHandler {
    // ...
};

} // namespace file_io
} // namespace utilities
} // namespace my_project
```

#### 3.2.5 枚举类型
```cpp
// 枚举类型使用帕斯卡命名法
enum class Color {
    Red,        // 枚举值使用帕斯卡命名法
    Green,
    Blue,
    DarkBlue
};

enum class FilePermission {
    Read = 1,
    Write = 2,
    Execute = 4
};
```

#### 3.2.6 模板参数
```cpp
// 使用帕斯卡命名法，以 T 开头
template<typename TValue>
class Container {
    // ...
};

template<typename TKey, typename TValue>
class HashMap {
    // ...
};

// 概念约束的模板参数
template<typename T>
concept Numeric = std::is_arithmetic_v<T>;

template<Numeric T>
class Calculator {
    // ...
};
```

### 3.3 类型别名
```cpp
// 使用帕斯卡命名法，以 Type 结尾
using StringVector = std::vector<std::string>;
using CallbackFunction = std::function<void(int)>;

template<typename T>
using Pointer = std::shared_ptr<T>;
```

## 4. 格式规范

### 4.1 缩进和空格
```cpp
// 使用 4 个空格进行缩进
class Example {
public:
    void Method() {
        if (condition) {
            DoSomething();
        } else {
            DoSomethingElse();
        }
    }
};

// 操作符周围加空格
int result = a + b * c;
if (value > threshold && isValid) {
    // ...
}
```

### 4.2 大括号风格
```cpp
// 使用 Allman 风格（大括号单独成行）
class Example 
{
public:
    void Method() 
    {
        if (condition) 
        {
            // ...
        } 
        else 
        {
            // ...
        }
    }
};
```

### 4.3 每行字符限制
```cpp
// 每行不超过 80-120 个字符
// 过长的行应该适当换行
void VeryLongFunctionName(int very_long_parameter_name,
                         const std::string& another_long_parameter,
                         double third_parameter) 
{
    // 函数实现
}
```

## 5. 注释规范

### 5.1 文件头注释
```cpp
/**
 * @file class_name.h
 * @brief 简要描述文件功能
 * @author 作者姓名
 * @date 创建日期
 * @version 版本号
 */
```

### 5.2 文档注释 (Doxygen风格)
```cpp
/**
 * @brief 计算两个数的和
 * @param a 第一个加数
 * @param b 第二个加数
 * @return 两个数的和
 * @throws std::invalid_argument 当参数无效时抛出
 */
int Add(int a, int b);
```

### 5.3 行内注释
```cpp
// 检查用户权限
if (!user.HasPermission(Permission::Write)) {
    return ErrorCode::AccessDenied;  // 权限不足，返回错误
}
```

## 6. 其他重要规范

### 6.1 包含保护
```cpp
// 头文件必须包含保护
#ifndef PROJECT_NAME_FILE_NAME_H
#define PROJECT_NAME_FILE_NAME_H

// 头文件内容

#endif // PROJECT_NAME_FILE_NAME_H

// 或者使用 #pragma once（现代编译器支持）
#pragma once
```

### 6.2 包含顺序
```cpp
// 1. 相关头文件
#include "my_class.h"

// 2. C系统头文件
#include <cstdio>
#include <cstdlib>

// 3. C++系统头文件
#include <vector>
#include <string>

// 4. 其他库头文件
#include <boost/algorithm/string.hpp>

// 5. 本项目其他头文件
#include "other_header.h"
```

### 6.3 异常规范
```cpp
// 明确声明可能抛出的异常
class FileHandler {
public:
    /// @throws std::ios_base::failure 当文件无法打开时抛出
    void OpenFile(const std::string& filename);
    
    // 不抛出异常的函数使用 noexcept
    int GetSize() const noexcept;
};
```

### 6.4 现代C++特性使用规范
```cpp
// 优先使用 nullptr 而不是 NULL
int* ptr = nullptr;

// 使用 auto 避免冗长的类型声明
auto result = CalculateComplexValue();

// 使用范围for循环
for (const auto& item : container) {
    ProcessItem(item);
}

// 使用智能指针而不是原始指针
std::unique_ptr<Resource> resource = CreateResource();
```

## 7. 代码组织规范

### 7.1 类定义顺序
```cpp
class Example {
public:     // 公有接口在前
    // 构造函数和析构函数
    Example();
    ~Example();
    
    // 公有方法
    void PublicMethod();
    
protected:  // 保护成员
    void ProtectedMethod();
    
private:    // 私有成员在最后
    void PrivateMethod();
    int m_private_data;
};
```

### 7.2 头文件最小化原则
```cpp
// 头文件中只包含必要的声明
// 使用前向声明减少依赖
class OtherClass;  // 前向声明

class MyClass {
public:
    void UseOtherClass(OtherClass* obj);
    
private:
    OtherClass* m_other;  // 指针或引用可以使用前向声明
};
```

## 8. 示例代码

### 8.1 完整的类示例
```cpp
/**
 * @file network_manager.h
 * @brief 网络连接管理类
 * @author Developer Name
 * @date 2024-01-01
 */
#ifndef MY_PROJECT_NETWORK_MANAGER_H
#define MY_PROJECT_NETWORK_MANAGER_H

#include <string>
#include <vector>
#include <memory>

namespace my_project {
namespace network {

class Connection;  // 前向声明

/**
 * @brief 网络管理器类，负责管理网络连接
 */
class NetworkManager {
public:
    /**
     * @brief 构造函数
     * @param max_connections 最大连接数
     */
    explicit NetworkManager(int max_connections);
    
    /**
     * @brief 析构函数
     */
    ~NetworkManager();
    
    /**
     * @brief 建立新连接
     * @param address 目标地址
     * @param port 端口号
     * @return 连接对象指针
     * @throws NetworkException 当连接失败时抛出
     */
    std::unique_ptr<Connection> Connect(const std::string& address, int port);
    
    /**
     * @brief 检查管理器是否已初始化
     * @return 初始化状态
     */
    bool IsInitialized() const noexcept;

private:
    void InitializeNetwork();
    void CleanupConnections();

private:
    int m_max_connections;
    bool m_is_initialized;
    std::vector<std::unique_ptr<Connection>> m_connections;
};

} // namespace network
} // namespace my_project

#endif // MY_PROJECT_NETWORK_MANAGER_H
```

## 9. 工具支持

### 9.1 静态分析工具
- 使用 clang-format 进行代码格式化
- 使用 clang-tidy 进行静态分析
- 使用 cppcheck 进行代码检查

### 9.2 配置文件示例
**.clang-format**:
```yaml
BasedOnStyle: LLVM
IndentWidth: 4
TabWidth: 4
UseTab: Never
BreakBeforeBraces: Allman
ColumnLimit: 100
```

## 总结

本规范基于以下国际标准制定：
- Google C++ Style Guide
- C++ Core Guidelines
- ISO C++ 标准最佳实践

团队应根据具体项目需求适当调整，但一旦确定规范，所有成员必须严格遵守以保持代码一致性。